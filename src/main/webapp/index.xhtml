<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title></title>
    <h:outputStylesheet library="default" name="css/rowscss.css"/>
</h:head>
<h:body>
    <h:form id="hashSetFormId">
        <b>Products Table</b>
        <h:dataTable value="#{productTable.dataList}" binding="#{productTable.table}" rows="#{productTable.rowsOnPage}"
                     first="0" var="t" border="1" style="text-align: center">
            <h:column>
                <f:facet name="header">Number of Units to Purchase</f:facet>
                <h:outputText value="#{0}"/>
                <!--                aqui deberia ser un input con su respectivo validador-->
            </h:column>
            <h:column>
                <f:facet name="header">Total Item Price</f:facet>
                <h:outputText value="#{0}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Serial Number</f:facet>
                <h:outputText value="#{t.serialNumber}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Product Name</f:facet>
                <h:outputText value="#{t.productName}"/>
            </h:column>
            <h:column>
                <f:facet name="header">
                    Price per Unit<br/>
                    <h:selectOneMenu value="#{productTable.criteria}">
                        <f:selectItem itemValue="all" itemLabel="all"/>
                        <f:selectItem itemValue="&lt;26" itemLabel="&lt;26"/>
                        <f:selectItem itemValue="&gt;=26" itemLabel="&gt;=26"/>
                    </h:selectOneMenu>
                    <h:commandButton value="Go!" action="#{productTable.addTableFilter()}"/>
                </f:facet>
                <h:outputText value="$ #{t.pricePerUnit}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Number of Units Currently In Stock</f:facet>
                <h:outputText value="#{t.stock}"/>
            </h:column>
            <f:facet name="footer" style="text-align: left">
                <h:outputText value="#{(productTable.table.first div productTable.table.rows) + 1}">
                    <f:converter converterId="javax.faces.Integer"/>
                </h:outputText>
                of
                <h:outputText
                        value="#{productTable.table.rowCount mod productTable.table.rows eq 0 ? (productTable.table.rowCount div productTable.table.rows) : ((productTable.table.rowCount div productTable.table.rows) + 1)-(((productTable.table.rowCount div  productTable.table.rows) + 1) mod 1)}">
                    <f:converter converterId="javax.faces.Integer"/>
                </h:outputText>
                <h:commandButton value="First Page" action="#{productTable.goToFirstPage()}"
                                 disabled="#{productTable.table.first eq 0}"/>
                <h:commandButton value="Previous Page" action="#{productTable.goToPreviousPage()}"
                                 disabled="#{productTable.table.first eq 0}"/>
                <h:commandButton value="Next Page" action="#{productTable.goToNextPage()}"
                                 disabled="#{productTable.table.first + productTable.table.rows ge productTable.table.rowCount}"/>
                <h:commandButton value="Last Page" action="#{productTable.goToLastPage()}"
                                 disabled="#{productTable.table.first + productTable.table.rows ge productTable.table.rowCount}"/>
                <b>FIRST:</b> #{productTable.table.first}
                <b>ROWS:</b> #{productTable.table.rows}
                <b>ROW COUNT:</b> #{productTable.table.rowCount}
            </f:facet>
        </h:dataTable>
        <br/>
        <br/>
        <h:outputText value="The total order price is: $ #{productTable.totalPrice}"/>
        <br/>
        <br/>
        <h:commandButton value="Purchase" action="purchase"/>
    </h:form>
</h:body>
</html>

